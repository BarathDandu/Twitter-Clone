<!doctype html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@600&display=swap" rel="stylesheet">      
    <link rel="icon" href="http://barathdandu-com.stackstaging.com/twitter/images/Bluelogo.png">		

    <title>Twitter Home</title>
      
    <link rel="stylesheet" href="main.css">
        
</head>
<body>

<div class="container">
    <div class="row">
        <div class="col-3">

            <!-- Modal -->
            <div class="modal" id="tweetmodal" tabindex="-1" >
                <div class="modal-dialog modal-lg">
                    <div class="modal-content   ">
                        <div class="modal-header" style = "border-bottom-color: #2F3336;">
                            <button type="button" class="modalclose" data-dismiss="modal">
                                <span >&times;</span>
                            </button>
                        </div>
                        <div class="modal-body" >
                            <div id = "modalpage1">
                                
                                <div style = "height:100%; width:10%; float:left;">
                                    <img class = "profilepictweet" src="http://barathdandu-com.stackstaging.com<?php echo $piclocation ?>" > 
                                </div>
                                
                                <div id = "te" style = "float:left; width:90%;height:auto;">
                                    <span class="textarea" role="textbox" contenteditable="true" placeholder="What's happening?"></span>
                                </div>
                                
                                <div class = "mediadiv"style =" display:none;width:87%; float:right;overflow:hidden; margin: 1vh;border-radius: 20px;" >
                                    <button  type="button" class="imgclose"><span >&times;  </span></button>
                                    <img id="mediainserted" src=""  >
                                    <button  type="button" class="editimage logodiv"><span >Edit</span></button>
                                </div>
                        
                                <div class = "modalfooter" style = "float:right; width:90%;height:auto;margin:0.5vh;border-top: 1px solid #2F3336;">
                                    <label for = "fileinp" class = "logodiv" id = "insrtpht">  
                                        <img id = "mediaicon" src="http://barathdandu-com.stackstaging.com/twitter/images/insertmedia.png" alt="Twitter">
                                    </label>
                                    <input id="fileinp" type="file" accept="image/png, image/gif, image/jpeg" name = "fileinp">
                                    <button type="button" class="tweetmodalbtn texx">Tweet</button>
                                </div>

                            </div>
                        
                            <div id = "modalpage2" style = "display: none;">
                            
                                <div class = "editdiv" style ="border:1px solid #fff;width:95%; float:right;overflow:hidden; margin:1vh;border-radius: 20px;">
                                    <span id = "h" ></span>
                                </div>
                            
                                <div class = "modalfooter" style = "float:right; width:90%;height:auto;margin:0.5vh;border-top: 1px solid #2F3336;">
                                    <button id = "editcancel" type="button" class="tweetmodalbtn texx" style = "margin-left:1vh; background-color: #6E767D;">Cancel</button>
                                    <button id = "saveedit" type="button" class="tweetmodalbtn texx">Save</button>
                                </div>
                            
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id = "cont" class="float-right">
                
                <a class = "logodiv">                
                    <img class = "log" src="http://barathdandu-com.stackstaging.com/twitter/images/logowhiteonblack.png" alt="Twitter">
                </a>
            
                <a href='' id = "Home" class = "left-col tex">
                    <img class = "log" src="http://barathdandu-com.stackstaging.com/twitter/images/homewhitelogo.png" alt="Twitter">
                    <img class = "log hovlogo" src="http://barathdandu-com.stackstaging.com/twitter/images/hhl.png" alt="Twitter">
                    Home   
                </a >
                <a href='' id = "HomePressed" class = "selected-nav tex">
                    <img class = "log" src="http://barathdandu-com.stackstaging.com/twitter/images/homebluelogo.png" alt="Twitter">
                    Home   
                </a >

                <a href=""  id = "Explore" class = "left-col tex">
                    <img class = "log" src="http://barathdandu-com.stackstaging.com/twitter/images/explorewhitelogo.png" alt="Twitter">
                    <img class = "log hovlogo" src="http://barathdandu-com.stackstaging.com/twitter/images/ehl.png" alt="Twitter">
                    Explore
                </a>
                <a href='' id = "ExplorePressed" class = "selected-nav tex">
                    <img class = "log " src="http://barathdandu-com.stackstaging.com/twitter/images/explorebluelogo.png" alt="Twitter">
                    Explore   
                </a >
            
                <a href="" id = "Notifications" class = "left-col tex">
                    <img class = "log" src="http://barathdandu-com.stackstaging.com/twitter/images/notificationswhitelogo.png" alt="Twitter">
                    <img class = "log hovlogo" src="http://barathdandu-com.stackstaging.com/twitter/images/nhl.png" alt="Twitter">
                    Notifications
                </a>
                <a href="" id = "NotificationsPressed" class = "selected-nav tex">
                    <img class = "log " src="http://barathdandu-com.stackstaging.com/twitter/images/notificationsbluelogo.png" alt="Twitter">
                    Notifications
                </a>
            
                <a href="" id = "Messages" class = "left-col tex">
                    <img class = "log" src="http://barathdandu-com.stackstaging.com/twitter/images/messageswhitelogo.png" alt="Twitter">
                    <img class = "log hovlogo" src="http://barathdandu-com.stackstaging.com/twitter/images/mhl.png" alt="Twitter">
                    Messages
                </a>
                <a href="" id = "MessagesPressed" class = "selected-nav tex">
                    <img class = "log " src="http://barathdandu-com.stackstaging.com/twitter/images/messagesbluelogo.png" alt="Twitter">
                    Messages
                </a>
            
                <a href="" id = "Bookmarks" class = "left-col tex">
                    <img class = "log" src="http://barathdandu-com.stackstaging.com/twitter/images/bookmarkswhitelogo.png" alt="Twitter">                  
                    <img class = "log hovlogo" src="http://barathdandu-com.stackstaging.com/twitter/images/bhl.png" alt="Twitter">
                    Bookmarks
                </a>
                <a href="" id = "BookmarksPressed" class = "selected-nav tex">
                    <img class = "log " src="http://barathdandu-com.stackstaging.com/twitter/images/bookmarksbluelogo.png" alt="Twitter">
                    Bookmarks
                </a>
            
                <a href="" id = "Lists" class = "left-col tex">
                    <img class = "log" src="http://barathdandu-com.stackstaging.com/twitter/images/listswhitelogo.png" alt="Twitter">
                    <img class = "log hovlogo" src="http://barathdandu-com.stackstaging.com/twitter/images/lhl.png" alt="Twitter">
                    Lists
                </a>
                <a href="" id = "ListsPressed" class = "selected-nav tex">
                    <img class = "log" src="http://barathdandu-com.stackstaging.com/twitter/images/listsbluelogo.png" alt="Twitter">
                    Lists
                </a>
            
                <a href="" id = "<?php echo $username ?>" class = "left-col tex">
                    <img class = "log" src="http://barathdandu-com.stackstaging.com/twitter/images/profilewhitelogo.png" alt="Twitter">
                    <img class = "log hovlogo" src="http://barathdandu-com.stackstaging.com/twitter/images/phl.png" alt="Twitter">
                    Profile
                </a>
                <a href="" id = "<?php echo $username.'Pressed'?>" class = "selected-nav tex">
                    <img class = "log" src="http://barathdandu-com.stackstaging.com/twitter/images/profilebluelogo.png" alt="Twitter">
                    Profile
                </a>
            
                <a href="" id = "More" class = "left-col tex">
                    <img class = "log" src="http://barathdandu-com.stackstaging.com/twitter/images/morewhitelogo.png" alt="Twitter">
                    <img class = "log hovlogo" src="http://barathdandu-com.stackstaging.com/twitter/images/morehl.png" alt="Twitter">
                    More
                </a>
                <a href="" id = "MorePressed" class = "selected-nav tex">
                    <img class = "log " src="http://barathdandu-com.stackstaging.com/twitter/images/morehl.png" alt="Twitter">
                    More
                </a>
                
                <br><br>
                <input type = "button"  id = "tweet-left-col" class = "texx" value = "Tweet" data-toggle="modal" data-target="#tweetmodal" >

                <a class = "foote popover-dismiss" data-html='true' tabindex="0" data-toggle="popover" data-placement="top" data-content="<a class = 'logoutpopover texx' href='http://barathdandu-com.stackstaging.com/twitter/index.php?name=lauda'>Log Out</a>.">      
                    <img class = "profilepicleft" src="http://barathdandu-com.stackstaging.com<?php echo $piclocation ?>" > 
                    <div class = "data">
                        <span class="name"> <?php echo $name ?></span> 
                        <span class="usernametext"><?php echo '@'.$username ?></span> 
                    </div>
                    <img class = "treedots" src="http://barathdandu-com.stackstaging.com/twitter/images/treedotswhitelogo.png" > 
                    <img class = "treedots hovlogo" src="http://barathdandu-com.stackstaging.com/twitter/images/tdh.png" >   
                </a>
            
            </div>
        
        </div>
    
        <div class="col-5">
        
            <div id="HomeDiv" >Home Div</div>

            <div id="ExploreDiv">explorediv</div>

            <div id="NotificationsDiv">notificationsdiv</div>

            <div id="MessagesDiv">messagesdiv</div>

            <div id="BookmarksDiv">bookmarksdiv</div>

            <div id="ListsDiv">listsdiv</div>

            <div id="<?php echo $username.'Div'?>" class = "ProfileDiv" style = "margin: 0; padding: 0;">
               
                <div id="header" style = "margin: 0;padding: 0; border-bottom:1px solid rgba(110, 118, 125, 0.5) ;">
                    <div class = "left-col" style=" padding: 0.7vh 1.3vh 1.2vh 1.3vh;margin: 0.4vh 1vh;">
                        <img style = "height:1.5vh" src="http://barathdandu-com.stackstaging.com/twitter/images/backbutton.png" alt="Twitter">
                        <img style = "height:1.5vh" class = "hovlogo" src="http://barathdandu-com.stackstaging.com/twitter/images/backbuttonblue.png" alt="Twitter">
                    </div>
                    <div class = "data" style = "margin:1vh 0.4vh 0.1h 0.4vh;padding: 0;">
                        <span class="name" style = "margin:0vh;padding: 0;line-height: 2vh; font-size: 2.2vh;"> <?php echo $name ?></span> 
                        <span class="usernametext" style = "margin:0vh;padding: 0;line-height: 1.7vh;">0 Tweets</span> 
                    </div>  
                </div>

                <div style = "height: 21vh; background-color: #2F3336;">
                    <img class = "profilepic" src="http://barathdandu-com.stackstaging.com<?php echo $piclocation ?>" > 
                </div>
                <div style = "border: #fff 1px solid ;">
                    <input type = "button"  id = "setUpProfile" value = "Set up profile" data-toggle="modal" data-target="#setupprofilemodal" >
                </div>
            </div>
        
            <div id="MoreDiv">morediv</div>

        </div>

        <!-- Modal -->
        <div class="modal" id="setupprofilemodal" tabindex="-1" >
            <div class="modal-dialog modal-lg" style = "margin-top: 15vh;">
                <div class="modal-content">
                    <div class="modal-header" style="position: relative;">
                        <button type="button" style="position: absolute;" class="modalclose" data-dismiss="modal">
                            <span >&times;</span>
                        </button>
                        <img style = "margin: auto; margin-top: 2vh;" class = "log" src="http://barathdandu-com.stackstaging.com/twitter/images/logowhiteonblack.png" alt="Twitter">
                    </div>
                    <div class="modal-body">
                        <div style="clear: both;  border: #fff 1px solid; padding: 2vh;" >
                            <div style = " font-family: 'Work Sans', sans-serif; font-weight: 900; font-size:2.8vh;">Pick a profile picture</div> 
                            <div style = " font-size: 1.5vh;color: #6E767D; ">Have a favorite selfie? Upload it now.</div>                     
                        </div>
                        <div style=" border: rgb(133, 24, 24) 1px solid; width: 100%;" >
                            <img class = "profilepicedit" src="http://barathdandu-com.stackstaging.com<?php echo $piclocation ?>" > 
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-4">

            <div class="lds-dual-ring"></div>

        </div>

    </div>   
</div>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.js"></script>
    <link href="http://barathdandu-com.stackstaging.com/twitter/crop.css" rel="stylesheet"/>

    <script>

        var getVar = "<?php echo $_GET['page'] ?>"; 
        var selectedButton = '';
        var initCallPage = ''
        if(getVar == ''){
            initCallPage = "home";
            selectedButton = "#Home";
            selectedDiv = "#HomeDiv";
        }else{
            initCallPage = getVar.charAt(0).toUpperCase() + getVar.slice(1);
            selectedButton = "#"+initCallPage;
            const nonProfileDiv = ["Home","Explore", "Notifications", "Messages", "Bookmarks", "Lists", "More"];
            if(nonProfileDiv.includes(initCallPage)){
                selectedDiv = "#"+initCallPage+"Div";
            }
            else{
                selectedDiv = ".ProfileDiv";
            }
        }

        $(document).ready(function(){
            //alert(initCallPage);
            $(document).attr("title", initCallPage);

            ajaxCall(initCallPage.toLowerCase());
            
            $(selectedButton).hide();
            $(selectedButton+"Pressed").show();
            $(selectedDiv).show();
        
        });
        
        $(".tex").click(function(e){
            e.preventDefault(); 

            var str = "#"+this.id;

            if(!(str.includes(selectedButton))){
            
                prevSelected(selectedButton, selectedDiv);
                var call_Page = this.id;
                selectedButton = "#" + this.id;
                selectedDiv = "#" + this.id + "Div";

                $(selectedButton).hide();
                $(selectedButton+"Pressed").show()
                $(selectedDiv).show();
                
                window.history.pushState("","","http://barathdandu-com.stackstaging.com/twitter/"+ this.id);
                $(document).attr("title", this.id);
                
                ajaxCall(this.id.toLowerCase());
            }
        });

        function ajaxCall(call_Page){
            //alert(call_Page);
            if(call_Page == "Home"){
                $.getJSON("http://barathdandu-com.stackstaging.com/twitter/ajax.php", {call_Page: call_Page}, function(data, textStatus, xhr){
                    console.log(data);
                });
            }else if(call_Page == "Explore"){
                $.getJSON("http://barathdandu-com.stackstaging.com/twitter/ajax.php", {call_Page: call_Page}, function(data, textStatus, xhr){
                    console.log(data);
                });
            }else if(call_Page == "Notifications"){
                $.getJSON("http://barathdandu-com.stackstaging.com/twitter/ajax.php", {call_Page: call_Page}, function(data, textStatus, xhr){
                    console.log(data);
                });
            }else if(call_Page == "Messages"){
                $.getJSON("http://barathdandu-com.stackstaging.com/twitter/ajax.php", {call_Page: call_Page}, function(data, textStatus, xhr){
                    console.log(data);
                });
            }else if(call_Page == "Bookmarks"){
                $.getJSON("http://barathdandu-com.stackstaging.com/twitter/ajax.php", {call_Page: call_Page}, function(data, textStatus, xhr){
                    console.log(data);
                });
            }else if(call_Page == "Lists"){
                $.getJSON("http://barathdandu-com.stackstaging.com/twitter/ajax.php", {call_Page: call_Page}, function(data, textStatus, xhr){
                    console.log(data);
                });
            }else if(call_Page == "More"){
                $.getJSON("http://barathdandu-com.stackstaging.com/twitter/ajax.php", {call_Page: call_Page}, function(data, textStatus, xhr){
                    console.log(data);
                });
            }else{
                $.getJSON("http://barathdandu-com.stackstaging.com/twitter/ajax.php", {call_Page: call_Page}, function(data, textStatus, xhr){
                    console.log(data);
                });
            }
        }

        function prevSelected(selectedButton, selectedDiv){
            $(selectedButton+"Pressed").hide()
            $(selectedButton).show();
            $(selectedDiv).hide();
        };

        $(".left-col").hover(function(){
            $(this).children('img:nth(0)').hide();
            $(this).children('img:nth(1)').show();
        }, function(){
            $(this).children('img:nth(0)').show();
            $(this).children('img:nth(1)').hide(); 
        });

        $(document).ready(function(){
            
            $image_crop = $('#h').croppie({
                enableExif: true,
                enableResize: true,
                viewport: {
                    width:355,
                    height:200,
                    type:'square'
                }
            });

            $(".editimage").click(function(){
                $("#modalpage1").hide();
                $("#modalpage2").show();
                var reader = new FileReader();
                reader.onload = function (event) {
                    $image_crop.croppie('bind', {
                    url: event.target.result
                    }).then(function(){
                        console.log('jQuery bind complete');
                    });
                }
                reader.readAsDataURL(fileinp.files[0]);
            });

            $("#saveedit").click(function(event){
                $image_crop.croppie('result', {
                    type: 'canvas',
                    size:'original',
                    format: 'jpeg',
                    quality: '1',
                    circle: 'false'
                }).then(function(response){
                    //console.log(response);
                    mediainserted.src = response;
                    $("#modalpage2").hide();
                    $("#modalpage1").show();
                });
            });

        });

        fileinp.onchange = evt => {
            const [file] = fileinp.files
            if (file) {
                $(".imgclose").show();
                $(".editimage").show();
                $(".mediadiv").show();
                mediainserted.src = URL.createObjectURL(file);
                mediainserted.onload = function(){
                    setheight();
                } 
            }
        }

        $(window).resize(function() {
            setheight();  
            $("#modalpage2").hide();
            $("#modalpage1").show();
        });

        function setheight(){
            const [file] = fileinp.files
            if (file) {
                tweetmediaheight = mediainserted.height;
                var div = $('.mediadiv');
                var width = div.width();
                var defaultheight = (width * 9/16);
                if(tweetmediaheight > defaultheight ){
                    $('.mediadiv').height(defaultheight);
                }else{
                    $('.mediadiv').height(tweetmediaheight);
                }
                if (tweetmediaheight < 220){
                    $('.editdiv').height(220);
                }else{
                    $('.editdiv').height(tweetmediaheight);
                }
            }
        };

        $("#editcancel").click(function(){
            $("#modalpage2").hide();
            $("#modalpage1").show();
        });

        $(".imgclose").click(function(){
            mediainserted.src = "";
            $(".imgclose").hide();
            $(".editimage").hide();
            $('.mediadiv').height(0);
            $('#fileinp').val('')
        });
        
        $(".foote").hover(function(){
            $(this).children('img:nth(1)').hide();
            $(this).children('img:nth(2)').show();
        }, function(){
            $(this).children('img:nth(1)').show();
            $(this).children('img:nth(2)').hide();     
        });
      
        $(function () {
            $('[data-toggle="popover"]').popover({html:true,sanitize: false})
        });
        
        $('#te').on('input', function () {
            this.style.height = 'auto'; 
            this.style.height = (this.scrollHeight) + 'px';
        });
            
        $(document).on("click", "#funcid", function () {
            $(this).parents(".popover").popover('hide');
        });

    </script>
</body>
</html>